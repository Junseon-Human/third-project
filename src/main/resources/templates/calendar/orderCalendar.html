<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<th:block layout:fragment="css">
  <style>
    #infoheader > a {
      color: white;
    }
    .fs-4 {
      color: white;
    }
    tr > th {
      color: white;
    }
    tr > td {
      color: white;
    }
    #board :hover {
      cursor: pointer;
    }
    /* FullCalendar 관련 스타일 */
    #calendar {
      margin: 40px auto;
    }
  </style>
</th:block>

<th:block layout:fragment="script">
  <script th:inline="javascript">

    document.addEventListener('DOMContentLoaded', function() {
      const calendarEl = document.getElementById('calendar');

      // Ajax 요청을 통해 서버에서 이벤트 데이터를 가져옴
      const request = $.ajax({
        url: "/order/event", // 서버에서 일정 데이터를 가져오는 URL
        method: "GET",
      });

      request.done(function(data) {
        // FullCalendar 인스턴스 생성 및 이벤트 데이터 설정
        const calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',  // 달력의 초기 뷰 설정
          events: data  // 서버에서 받은 이벤트 데이터를 설정
        });

        calendar.render();  // 달력 렌더링
      });

      request.fail(function(jqXHR, textStatus, errorThrown) {
        console.error("Error fetching events: " + textStatus, errorThrown);
      });
    });

  </script>
</th:block>

<div layout:fragment="content">

  <div th:fragment="body" class="flex-shrink-0 p-3" style="width: 280px;" id="infoheader">
    <a href="/members/info"
       class="d-flex align-items-center pb-3 mb-3 link-body-emphasis text-decoration-none border-bottom">
      <svg class="bi pe-none me-2" width="30" height="24">
        <use xlink:href="#bootstrap"></use>
      </svg>
      <span class="fs-2 fw-semibold">마이페이지</span>
    </a>
    <ul class="list-unstyled ps-0">
      <li class="mb-1">
        <a href="/members/myBoards"
           class="fs-4 ms-3 btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed">
          내가 쓴 글
        </a>
      </li>
      <li class="mb-1">
        <a href="/orders"
           class="fs-4 ms-3 btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed">
          예매이력
        </a>
      </li>
      <li class="mb-1">
        <a href="/favorites"
           class="fs-4 ms-3 btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed">
          즐겨찾기 공연
        </a>
      </li>
      <li class="mb-1">
        <a href="/reviews"
           class="fs-4 ms-3 btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed">
          나의 후기
        </a>
      </li>
    </ul>
  </div>

  <!--즐겨찾기 공연 목록-->
  <div id='calendar'>

  </div>
</div>


</html>